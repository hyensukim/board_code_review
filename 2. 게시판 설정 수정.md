# ê²Œì‹œíŒ ì„¤ì • ìˆ˜ì •
- admin/board/config.html viewì— BoardForm.modeë¡œ êµ¬ë¶„í•˜ë„ë¡ í•˜ì—¬, updateë©´ ìˆ˜ì •, ì—†ìœ¼ë©´ ë“±ë¡ í˜ì´ì§€ê°€ ë³´ì´ë„ë¡ êµ¬í˜„.

## ğŸ‡ BoardConfigInfoService
- ê²Œì‹œíŒ ì„¤ì • ì¡°íšŒ

### private void accessCheck(BoardEntity board, String location)
- ê²Œì‹œíŒ ì„¤ì • ì‹œ, location ë³„ë¡œ ì ‘ê·¼ ê¶Œí•œ ì„¤ì •í•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„.
- ì ‘ê·¼ ê¶Œí•œ ì²´í¬(ê²Œì‹œíŒ ì„¤ì • - list, view, write, update ë³„ ì‚¬ìš©ê¶Œí•œ : ALL(ë¹„íšŒì› í¬í•¨), MEMBER(íšŒì› ì´ìƒ), ADMIN(ê´€ë¦¬ì))
    ```
    private void accessCheck(BoardEntity board, String location){
        Role role = Role.ALL;
        if(location.equals("list")){ // ëª©ë¡ ì ‘ê·¼ ê¶Œí•œ
            role = board.getLiAccessRole();
        }else if(location.equals("view")){ // ë³´ê¸° ì ‘ê·¼ ê¶Œí•œ
            role = board.getVAccessRole();
        }else if(location.equals("write")){ // ì“°ê¸° ì ‘ê·¼ ê¶Œí•œ
            role = board.getWAccessRole();
            if(!memberUtil.isLogin()) {board.setGuest(true);}//ë¹„íšŒì› ê¶Œí•œ ë¶€ì—¬
        }else if(location.equals("reply")){ // ë‹µê¸€ ì ‘ê·¼ ê¶Œí•œ
            role = board.getReplyAccessRole();
        }else if(location.equals("comment")){ // ëŒ“ê¸€ ì ‘ê·¼ ê¶Œí•œ
            role = board.getCommentAccessRole();
        }

        if((role == Role.MEMBER && !memberUtil.isLogin())
        || (role == Role.ADMIN && !memberUtil.isAdmin())){
            throw new BoardNotAllowAccessException();
        }
    }
    ```

### BoardEntity get(String bId, boolean isAdmin, String location)
- BoardRepository .findById(String bId) ë¥¼ í†µí•´ bIdì— í•´ë‹¹í•˜ëŠ” BoardEntity ê°ì²´ ì¡°íšŒ. -> .orElseThrow(BoardConfigNotExistException::new) ì—†ìœ¼ë©´, ì˜ˆì™¸ë°œìƒ.
- ë‘ë²ˆì§¸ ë§¤ê°œë³€ìˆ˜(isAdmin)ë¥¼ í†µí•´ ê¶Œí•œì²´í¬ ì—¬ë¶€ í™•ì¸.(accessCheck() ë©”ì„œë“œ í˜¸ì¶œ ì—¬ë¶€)
- BoardEntity ë°˜í™˜.

## ğŸ‡ BoardController
### GetMapping("/{bId}/update") / public String update(@PathVariable String bId,Model model)
- ë§¤ê°œë³€ìˆ˜ë¡œ ê²½ë¡œë³€ìˆ˜ë¥¼ ì…ë ¥ë°›ìŒ.(url ì£¼ì†Œì— ê²½ë¡œ ë³€ìˆ˜ ê°’ì„ ë„£ìœ¼ë©´, ê²½ë¡œë³€ìˆ˜ì— í•´ë‹¹í•˜ëŠ” ê°’ì„ DBì—ì„œ ì¡°íšŒ.)
- BoardConfigInfoService.get(bId,true) : BoardEntity ì¡°íšŒ.
- new ModelMapper().mpa(BoardEntity,BoarForm.class) : BoardEntity ê°ì²´ë¥¼ BoardForm ê°ì²´ë¡œ ë§¤í•‘.
    - ModelMapper() ì‚¬ìš©.
    - mode "" -> "update"ë¡œ ë³€ê²½.
    - í•„ë“œ íƒ€ì…ì´ ë‹¤ë¥¸ ê²½ìš°, ìˆ˜ë™ìœ¼ë¡œ setterë¥¼ í†µí•´ ë§¤í•‘í•´ì¤˜ì•¼í•¨.
- ë§¤í•‘í•œ BoardForm ê°ì²´ë¥¼ Model.addAttribute() í†µí•´ viewë¡œ ì „ë‹¬.
- ê²½ë¡œë¡œ admin/board/config ë°˜í™˜.

### @PostMapping("/save") / String save(@Valid BoardForm boardForm, Errors errors, Model model)
- ê²Œì‹œíŒ ì„¤ì • ë“±ë¡ ì°¸ê³ 

### BoardConfigSaveService - void save(BoardForm boardForm, Eorrors errors)
- ê²Œì‹œíŒ ì„¤ì • ë“±ë¡ ì°¸ê³ 

## ğŸ‡ templates/admin/board/config.html
- `<input th:if="*{mode != null}" type="hidden" name="mode" th:field="*{mode}">`
    - ì‚¬ìš©ìë¡œë¶€í„° ì…ë ¥ ë°›ëŠ” ê°’ì´ ì•„ë‹ˆê³ , ë Œë”ë§ê³¼ ë™ì‹œì— ì •í•´ì§„ ê°’ì´ ë“¤ì–´ê°€ ìˆì–´, submit ì‹œ ì…ë ¥ë°ì´í„°ë¡œ ë“¤ì–´ì˜¤ë„ë¡ í•  ë•Œ ì‚¬ìš©.
- `[[*{bId}]]`
    - thymeleaf ë¬¸ë²•ìœ¼ë¡œ, ë³€ìˆ˜ê°’ì„ í¸í•˜ê²Œ viewì— ë…¸ì¶œì‹œí‚¬ ë•Œ ì‚¬ìš©í•œë‹¤.
