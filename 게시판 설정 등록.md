# ê²Œì‹œíŒ ì„¤ì • ë“±ë¡ ê¸°ëŠ¥.
## ğŸ‡ BoardEntity : ê²Œì‹œíŒ ì„¤ì • ì—”í‹°í‹°
### í•„ë“œ(ì»¬ëŸ¼)
<!-- <ì¼ë°˜ ì„¤ì •> -->
- String bId : ê²Œì‹œíŒ ì•„ì´ë””(ê¸°ë³¸í‚¤)
- String bName : ê²Œì‹œíŒ ì´ë¦„(í•„)
- boolean bUse : ê²Œì‹œíŒ ì‚¬ìš© ì—¬ë¶€ - íšŒì› ì‚¬ìš© ê°€ëŠ¥ ì—¬ë¶€
- int rowsOfPage : í•œ í˜ì´ì§€ë‹¹ ê²Œì‹œê¸€ ê°¯ìˆ˜ 
- boolean showList : ê²Œì‹œê¸€ í•˜ë‹¨ì— ê²Œì‹œê¸€ ëª©ë¡ì´ ë³´ì´ë„ë¡ í•˜ëŠ” ê²ƒ ì—¬ë¶€
<!-- <ë¶„ë¥˜ ì„¤ì •> - textArea -->
- String category : ê²Œì‹œíŒ ë¶„ë¥˜
<!-- <ê¶Œí•œ ì„¤ì •> -radio ë²„íŠ¼ êµ¬ë¶„(ì „ì²´ / íšŒì›+ê´€ë¦¬ì / ê´€ë¦¬ì) -->
<!-- - ê° location ë‹¹ í˜ì´ì§€ ì ‘ê·¼ ê¶Œí•œ ì„¤ì • 
- locations : list, view, write, update, reply, comment
- write / update ê²½ìš°, ë¹„íšŒì›ë„ ë¹„íšŒì› ë¹„ë°€ë²ˆí˜¸ë¡œ ì ‘ê·¼ ê°€ëŠ¥í•˜ë„ë¡ êµ¬í˜„. -->
- Role liAccessRole = Role.ALL; : ê¸€ëª©ë¡ ì ‘ê·¼ê¶Œí•œ(í•„ìˆ˜)
- Role vAccessRole = Role.ALL; : ê¸€ë³´ê¸° ì ‘ê·¼ê¶Œí•œ(í•„ìˆ˜)
- Role wAccessRole = Role.ALL; : ê¸€ì“°ê¸° ì ‘ê·¼ê¶Œí•œ(í•„ìˆ˜)
- Role replyAccessRole = Role.ALL; : ë‹µê¸€ ì ‘ê·¼ê¶Œí•œ(í•„ìˆ˜)
- Role commentAccessRole = Role.ALL; : ëŒ“ê¸€ ì ‘ê·¼ê¶Œí•œ(í•„ìˆ˜)
<!-- <ê¸°ëŠ¥ ì„¤ì •> - radio ë²„íŠ¼ êµ¬ë¶„(ì‚¬ìš© / ë¯¸ì‚¬ìš©) -->
- boolean useEditor; : ì—ë””í„° ì‚¬ìš©ì—¬ë¶€
- boolean useAttachFile; : íŒŒì¼ ì²¨ë¶€ ì‚¬ìš©ì—¬ë¶€
- boolean useAttachImage; : ì´ë¯¸ì§€ ì²¨ë¶€ ì‚¬ìš©ì—¬ë¶€
- String locationAfterWriting = "view"; : ê¸€ì‘ì„± í›„ ì´ë™ ê´€ë ¨ ì„¤ì • ê¸°ëŠ¥(í•„ìˆ˜)
- boolean useReply; : ë‹µê¸€ ì‚¬ìš©ì—¬ë¶€
- boolean useComment; : ëŒ“ê¸€ ì‚¬ìš©ì—¬ë¶€
- boolean isGuest; : ë¹„íšŒì› ì‘ì„±, ìˆ˜ì • ëª¨ë“œ ì—¬ë¶€
- String skin = "default"; : ê²Œì‹œíŒ ìŠ¤í‚¨(ìŠ¤í‚¨ ë³„ë¡œ viewê°€ ë°”ë€ë‹¤)(í•„ìˆ˜)

### ë§¤ì„œë“œ
- String[] getCategories() : String -> split() -> String[]ë¡œ ë³€í™˜.
	- ê´€ë¦¬ì í˜ì´ì§€ ê²Œì‹œíŒ ì„¤ì • ëª©ë¡ ì¡°íšŒ ì‹œ ë°°ì—´ë¡œ ì¶œë ¥.
<br><br>

## ğŸ‡ BoardForm : ê²Œì‹œíŒ ì„¤ì • ì»¤ë©˜ë“œ ê°ì²´
### í•„ë“œ(ì…ë ¥ ë°ì´í„°)
- private String mode; : 'update' = ìˆ˜ì •, ì—†ìœ¼ë©´ ì¶”ê°€(ì…ë ¥ ë°ì´í„° X)
- private String bId; : ê²Œì‹œíŒì•„ì´ë””
- private String bName; : ê²Œì‹œíŒì´ë¦„
- private boolean bUse; : ì‚¬ìš©ì—¬ë¶€
- private int rowsOfPage = 20; : í•œí˜ì´ì§€ ë‹¹ ê²Œì‹œê¸€ ìˆ˜
- private boolean showList; : ê²Œì‹œê¸€ í•˜ë‹¨ ëª©ë¡
- private String category; : ê²Œì‹œíŒ ë¶„ë¥˜
- private String liAccessRole = "ALL"; : ê¸€ëª©ë¡ ì ‘ê·¼ê¶Œí•œ
- private String vAccessRole = "ALL"; : ê¸€ë³´ê¸° ì ‘ê·¼ê¶Œí•œ
- private String wAccessRole = "ALL"; : ê¸€ì“°ê¸° ì ‘ê·¼ê¶Œí•œ
- private String replyAccessRole = "ALL"; : ë‹µê¸€ ì ‘ê·¼ê¶Œí•œ
- private String commentAccessRole = "ALL"; : ëŒ“ê¸€ ì ‘ê·¼ê¶Œí•œ
- private boolean useEditor; : ì—ë””í„° ì‚¬ìš©ì—¬ë¶€
- private boolean useAttachFile; : íŒŒì¼ ì²¨ë¶€ ì‚¬ìš©ì—¬ë¶€
- private boolean useAttachImage; : ì´ë¯¸ì§€ ì²¨ë¶€ ì‚¬ìš©ì—¬ë¶€
- private String locationAfterWriting = "view"; : ê¸€ì‘ì„± í›„ ì´ë™ ê´€ë ¨ ì„¤ì • ê¸°ëŠ¥
- private boolean useReply; : ë‹µê¸€ ì‚¬ìš©ì—¬ë¶€
- private boolean useComment; : ëŒ“ê¸€ ì‚¬ìš©ì—¬ë¶€
- private String skin = "default"; : ê²Œì‹œíŒ ìŠ¤í‚¨(default / gellery)
<br><br>

## BoardRepository
- Repository : ë‚´ë¶€ì ìœ¼ë¡œ ì¿¼ë¦¬ êµ¬í˜„. -> ê°ì²´ì§€í–¥ íŒ¨ëŸ¬ë‹¤ì„ì— ë§ì¶° ì½”ë”© ê°€ëŠ¥
<br><br>

## BoardConfigSaveService
### void save(BoardForm boardForm, Eorrors errors)
- if(errors != null && errors.hasErrors()) {return;}
- bId ê°’ìœ¼ë¡œ DB ë°ì´í„° ì¡°íšŒ í›„ DB ë‚´ bId ì¤‘ë³µ ì¡°íšŒ(ë§Œì•½, ê¸°ì¡´ì˜ ë°ì´í„°ê°€ ìˆëŠ” ê²½ìš° ê¸°ì¡´ë°ì´í„°ì˜ ì†ì‹¤ì´ ë°œìƒí• ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë°©ì§€)
	- ì¤‘ë³µ ì‹œ DuplicateBoardConfigException ì˜ˆì™¸ ë°œìƒ.
	```
	String bId = boardForm.getBId();
    BoardEntity board = boardRepository.findById(bId).orElseGet(BoardEntity::new);
    String mode = boardForm.getMode();
    if((mode == null || !mode.equals("update")) && board.getBId() != null){ // ê²Œì‹œíŒ ë“±ë¡ -> ì¤‘ë³µ ì—¬ë¶€ ì²´í¬
        throw new DuplicateBoardConfigException();
    }
	```
- BoardForm -> BoardEntityë¡œ ë°ì´í„° ë§¤í•‘
- BoardRepositroy.saveAndFlush(BoardEntiy) - ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ ë°ì´í„° ìˆ˜ì • ë° DB ë°˜ì˜
<br><br>

## ğŸ‡ BoardController
### void commonProcessor(Model model, String title)
- ê²Œì‹œíŒ ì„¤ì • í˜ì´ì§€ ê³µí†µ ì½”ë“œ ì‘ì„±. // ê°ì²´ì§€í–¥ - ê³µí†µë˜ëŠ” ê¸°ëŠ¥ì€ ë¶„ë¦¬í•´ë¼.
	- Model / addAttribute() : ê°ì²´(ë°ì´í„°)ë¥¼ viewë¡œ ì „ë‹¬.
		- pageTitle ì†ì„±(attribute): ì›¹ í˜ì´ì§€ ì œëª© ë°ì´í„°.
		- title : `<h1>` ì œëª© ë°ì´í„°.
		- menuCode : ê´€ë¦¬ì í˜ì´ì§€ ì„œë¸Œ ë©”ë‰´ í•­ëª©ë³„ êµ¬ë¶„ ë°ì´í„°.(ex, board- ê²Œì‹œíŒ ì„¤ì • ì„œë¸Œë©”ë‰´ í•­ëª©)
	- ì„œë¸Œ ë©”ë‰´ ì²˜ë¦¬ : ì„œë¸Œë©”ë‰´ aíƒœê·¸ ìë™ ì¶”ê°€ ê¸°ëŠ¥ í´ë˜ìŠ¤ êµ¬í˜„.
		- MenuDetail í´ë˜ìŠ¤ : í•„ë“œ(String name, String url, String code)
		- Menus í´ë˜ìŠ¤ 
			- gets(String code) : MenuDetail ê°ì²´ì˜ codeì™€ ì¸ì codeê°€ ì¼ì¹˜í•  ê²½ìš° `List<MenuDetail>` ë°˜í™˜.
			- subMenuCode(HttpServletRequest request) : ìš”ì²­ uri ëë¶€ë¶„ ë¬¸ìì—´ ë°˜í™˜.
		- subMenuCode : on ìë™ ì¶”ê°€ë¥¼ ìœ„í•œ êµ¬ë¶„ ë°ì´í„°, ìˆìœ¼ë©´ on ì—†ìœ¼ë©´ x
		- submenus : ì„œë¸Œë©”ë‰´ List ê°ì²´ ë°ì´í„°. -> ê°ì²´ í•„ë“œê°’ aíƒœê·¸ì— ì¶”ê°€.

### @PostMapping("/save") / String save(@Valid BoardForm boardForm, Errors errors, Model model)
- org.sprigFramework.validation.Errors : ìœ íš¨ì„± ê²€ì¦ ê²°ê³¼ë¥¼ ì €ì¥í•œ ê°ì²´.
- mode ì²´í¬(ì—†ìœ¼ë©´ ë“±ë¡, ìˆê³  ë°ì´í„°ê°€ 'update'ì´ë©´ ìˆ˜ì •)
	```
	String mode = boardForm.getMode();
        commonProcess(model,mode != null && mode.equals("update") ? "ê²Œì‹œíŒ ìˆ˜ì •" : "ê²Œì‹œíŒ ë“±ë¡");
	``` 
- ë“±ë¡ ì‹œ, bId ê°’ ì¤‘ë³µì—¬ë¶€ ì²´í¬ ì¤‘ ì¤‘ë³µì‹œ DuplicateBoardConfigException ì˜ˆì™¸ ì²˜ë¦¬.
	```
	try{
            configSaveService.save(boardForm,errors);
        }catch(Exception e){
            errors.reject("BoardConfigErrors",e.getMessage());
        }
	```
	- errors.reject(String error) : ì „ ê°ì²´ì— ëŒ€í•œ ê¸€ë¡œë²Œ ì—ëŸ¬ì½”ë“œë¥¼ errors ê°ì²´ì— ì¶”ê°€.

- ì˜ˆì™¸ë°œìƒìœ¼ë¡œ errorsì— ì˜ˆì™¸ê°€ ì¶”ê°€ëœ ê²½ìš°, admin/board/config url ë°˜í™˜.
	
	 `if(errors.hasErrors()){return "admin/board/config";}`
	
- ì •ìƒ ë“±ë¡ or ìˆ˜ì • ì‹œ, ê²Œì‹œíŒ ëª©ë¡ìœ¼ë¡œ í˜ì´ì§€ ì´ë™. 

  `return "redirect:/admin/board"`
